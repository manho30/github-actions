name: Auto Commit
on:
  push:
    branches:
      - master
      - test
  schedule:
    - cron: '0 */12 * * *'
jobs:
  merge_pull_request:
    if: github.event.pull_request.merged == false
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Set Last Updated Time
        run: |
          d=`TZ='Asia/Kuala_Lumpur' date '+%a, %d %b %Y %T %z'`
          echo "Last updated: `$d` Kuala Lumpur Standard Time (UTC+0800)" > README.md
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          commit-message: "auto-commit by github actions"
          title: "Auto-generated pull request"
          branch: "auto-merge-branch"
          delete-branch: true
          labels: "auto-generated"
          body: 'This commit is create by automated'
          signoff: true
